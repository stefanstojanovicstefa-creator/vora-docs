{
  "project": "Vora Voice Platform",
  "branchName": "ralph/locally-running-dashboard-phase-2",
  "description": "Phase 2: DX Polish - Docker Compose alternative, port conflict detection, colored output, and root NPM aliases for the local development environment. IMPORTANT: The codebase is at ventus-voice/frontend/ and ventus-voice/backend/ (NOT at project root frontend/ backend/).",
  "userStories": [
    {
      "id": "US-L06",
      "title": "Docker Compose for Local Stack",
      "description": "As a developer who prefers Docker, I want a docker-compose.local.yml that runs the full stack (PostgreSQL, backend, frontend) in containers.",
      "acceptanceCriteria": [
        "IMPORTANT: Code is at ventus-voice/frontend/src/ and ventus-voice/backend/src/ (NOT root frontend/ or backend/)",
        "Create ventus-voice/docker-compose.local.yml",
        "Define 3 services: postgres (image: postgres:15), backend (build from backend/Dockerfile or node:20 image), frontend (node:20 image)",
        "PostgreSQL service: named volume 'vora-pg-data' for persistence, POSTGRES_DB=vora_dev, POSTGRES_USER=postgres, POSTGRES_PASSWORD=postgres, port 5432, healthcheck using pg_isready",
        "Backend service: depends_on postgres (condition: service_healthy), working_dir /app, volume mount ./backend:/app and named volume for node_modules, port 3001, command that runs npm install && npx prisma generate && npx prisma migrate deploy && npm run dev",
        "Frontend service: depends_on backend, working_dir /app, volume mount ./frontend:/app and named volume for node_modules, port 8080, command that runs npm install && npm run dev",
        "Use env_file for both backend (./backend/.env) and frontend (./frontend/.env)",
        "Override DATABASE_URL in backend environment to point to Docker postgres: postgresql://postgres:postgres@postgres:5432/vora_dev",
        "Named volumes defined: vora-pg-data, backend-node-modules, frontend-node-modules",
        "docker compose -f docker-compose.local.yml up builds and starts everything",
        "docker compose -f docker-compose.local.yml down -v cleans all volumes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Created ventus-voice/docker-compose.local.yml with 3 services: postgres (postgres:15, healthcheck via pg_isready, named volume vora-pg-data), backend (node:20, depends_on postgres healthy, volume mounts for code + named volume for node_modules, port 3001, env_file + DATABASE_URL override pointing to Docker postgres), frontend (node:20, depends_on backend, volume mounts + named node_modules, port 8080, env_file). All 3 named volumes defined. Commands run npm install + prisma generate + migrate deploy + dev for backend, npm install + dev for frontend."
    },
    {
      "id": "US-L07",
      "title": "Port Conflict Detection in Start Script",
      "description": "As a developer, I want the start script to detect and report port conflicts before starting services.",
      "acceptanceCriteria": [
        "IMPORTANT: Code is at ventus-voice/frontend/src/ and ventus-voice/backend/src/ (NOT root frontend/ or backend/)",
        "Read the existing ventus-voice/start-local.sh",
        "Enhance the port checking steps (3001 and 8080) to show the process name and command that occupies the port",
        "Use lsof -ti:PORT to get PID, then ps -p PID -o comm= to get process name",
        "If port 3001 is occupied: print 'Port 3001 is in use by [process] (PID: [pid])' in yellow, ask 'Kill it? (y/N)' and kill if confirmed",
        "If port 8080 is occupied: same behavior",
        "If user declines to kill: exit with message suggesting to free the port manually",
        "Keep existing functionality intact (preflight, install, db setup, startup)"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-L08",
      "title": "Colored Output and Progress Indicators",
      "description": "As a developer, I want the start script to use colors and visual indicators for better readability.",
      "acceptanceCriteria": [
        "IMPORTANT: Code is at ventus-voice/frontend/src/ and ventus-voice/backend/src/ (NOT root frontend/ or backend/)",
        "Read the existing ventus-voice/start-local.sh",
        "Add ANSI color variables at the top: RED, GREEN, YELLOW, BLUE, BOLD, RESET",
        "Add helper functions: info() prints blue text, success() prints green with checkmark, warn() prints yellow with warning symbol, error() prints red with X",
        "Replace all echo statements with appropriate color functions",
        "Add a banner at the top with the Vora name in bold/blue",
        "Add a spinner function that shows dots while waiting for backend health check",
        "Add a final summary box with borders showing access URLs",
        "Check if terminal supports colors (test -t 1) and disable colors if not (e.g., piped output)"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    }
  ]
}
